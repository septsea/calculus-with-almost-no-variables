\chapter{集与函数}

我先简单地介绍一下基础概念吧.

\section{集}

\begin{definition}
    \emph{集}\index{ji2@集}%
    是具有某种特定性质的对象汇集而成的一个整体.
    称其对象为\emph{元}\index{yuan2@元}.
\end{definition}

\begin{remark}
    事实上, 集与元是所谓的 ``原始概念''.
    我们至多\emph{描述}集或元是什么;
    我们无法\emph{定义}集或元.
\end{remark}

\begin{definition}
    无元的集是\emph{空集}\index{kong1ji2@空集}.
\end{definition}

\begin{remark}
    或许您在别的地方能看到形如 $\emptyset$ 的文字.
    这是\gls{mathematician}为空集造的符号.
    不过, 本书用不到这个记号.
\end{remark}

\begin{remark}
    一般用小写字母表示元, 大写字母表示集.
    这是大多数\gls{mathematician}的习惯.
\end{remark}

\begin{definition}
    一般地, 若集 $A$ 由元 $a$, $b$, $c$, $\dots$ 作成, 我们写
    \begin{align*}
        A = \{ a,b,c,\dots \}.
    \end{align*}
    还有一种记号.
    设集 $A$ 是由具有某种性质 $p$ 的对象汇集而成, 则记
    \begin{align*}
        A = \{ x \mid \text{$x$ 具有性质 $p$} \}.
    \end{align*}
\end{definition}

\begin{definition}
    若 $a$ 是集 $A$ 的元,
    则写 $a \in A$ 或 $A \ni a$,
    说 $a$ \emph{属于}\index{shu3yu2@属于} $A$
    或 $A$ \emph{包含}\index{bao1han2@包含} $a$.
    若 $a$ 不是集 $A$ 的元,
    则写 $a \notin A$ 或 $A \not\ni a$,
    说 $a$ \emph{不属于} $A$
    或 $A$ \emph{不包含} $a$.
\end{definition}

\begin{remark}
    ``属于'' 也是原始概念.
\end{remark}

\begin{definition}
    若任取 $a \in A$, 都有 $a \in B$,
    则写 $A \subset B$ 或 $B \supset A$,
    说 $A$ 是 $B$ 的\emph{子集}\index{zi3ji2@子集}%
    或 $B$ 是 $A$ 的\emph{超集}\index{chao1ji2@超集}.
    假如有一个 $b \in B$ 不是 $A$ 的元,
    可以用 ``真'' 形容之.
\end{definition}

\begin{remark}
    或许, 您在别的地方能看到形如
    $\subseteq$, $\subsetneq$ 或 $\subsetneqq$ 的记号.
    本书用不到这些记号;
    本书就用 $A \subset B$ 表示 $A$ 是 $B$ 的子集.
    事实上, 我们很少需要真子集的概念;
    假如我们必须要说 $A$ 是 $B$ 的真子集,
    我们再加上 $A \neq B$ 即可.
\end{remark}

\begin{example}
    设 $B = \{ 0,1,2 \}$, $C = \{ 0 \}$.
    不难看出, $0 \in C$, $1 \notin C$, $C \subset B$.
\end{example}

\begin{remark}
    空集是任意集的子集.
    空集是任意不空的集的真子集.
\end{remark}

\begin{definition}
    若集 $A$ 与 $B$ 包含的元完全一样,
    则 $A$ 与 $B$ 是同一集.
    我们说 $A$ \emph{等于} $B$, 写 $A = B$.
    显然
    \begin{align*}
        A = B
        \iff \text{$A \subset B$ 且 $B \subset A$}.
    \end{align*}
\end{definition}

\begin{definition}
    集 $A$ 与 $B$ 的\emph{交}\index{jiao1@交}是集
    \begin{align*}
        A \cap B = \{ x \mid \text{$x \in A$ 且 $x \in B$} \}.
    \end{align*}
    也就是说, $A \cap B$ 恰由 $A$ 与 $B$ 的公共元作成.

    集 $A$ 与 $B$ 的\emph{并}\index{bing4@并}是集
    \begin{align*}
        A \cup B = \{ x \mid \text{$x \in A$ 或 $x \in B$} \}.
    \end{align*}
    也就是说, $A \cup B$ 恰包含 $A$ 与 $B$ 的全部元.

    类似地, 可定义多个集的交与并.
\end{definition}

\begin{example}
    设 $E$ 是全体偶数作成的集;
    设 $O$ 是全体奇数作成的集.
    不难看出, $E \cap O$ 为空集,
    而 $E \cup O$ 恰为全体整数作成的集.
\end{example}

\begin{definition}
    设 $A$, $B$ 是集. 定义
    \begin{align*}
        A \setminus B = \{ x \mid \text{$x \in A$, $x \notin B$} \}.
    \end{align*}
\end{definition}

\begin{remark}
    值得注意的是, 我们没说 $B \subset A$.
\end{remark}

\begin{definition}
    设 $A$, $B$ 是集. 定义
    \begin{align*}
        A \times B = \{ (a,b) \mid \text{$a \in A$, $b \in B$} \}.
    \end{align*}
    这里, $(a, b)$ 是\emph{有序对}\index{you3xu4dui4@有序对}.
    我们规定,
    二个有序对 $(a, b)$ 与 $(c, d)$ 相等%
    相当于 $a = c$ 且 $b = d$.

    类似地,
    \begin{align*}
        A_1 \times A_2 \times \dots \times A_n
        = \{ (a_1, a_2, \dots, a_n) \mid \text{$a_1 \in A_1$, $a_2 \in A_2$, $\dots$, $a_n \in A_n$} \}.
    \end{align*}
    $(a_1, a_2, \dots, a_n)$ 与 $(b_1, b_2, \dots, b_n)$ 相等,
    相当于 $a_1 = b_1$, $a_2 = b_2$, $\dots$, $a_n = b_n$.
\end{definition}

\begin{remark}
    一般地, $A \times B \neq B \times A$.
\end{remark}

\begin{remark}
    设 $A$, $B$ 分别有 $m$, $n$~个元.
    则 $A \times B$ 有 $mn$~个元.
\end{remark}

\begin{definition}
    一般地,
    $\mathbb{N}$ 指全体非负整数作成的集;
    $\mathbb{Z}$ 指全体整数作成的集;
    $\mathbb{Q}$ 指全体有理数作成的集;
    $\mathbb{R}$ 指全体实数作成的集;
    $\mathbb{C}$ 指全体复数作成的集. 显然
    \begin{align*}
        \mathbb{N} \subset \mathbb{Z} \subset \mathbb{Q} \subset \mathbb{R} \subset \mathbb{C}.
    \end{align*}
\end{definition}

\begin{definition}
    在微积分里, $\mathbb{R}$ 的九类子集十分重要.
    具体地, 任取实数 $a$, $b$, 其中 $a < b$.
    那么我们记:
    \begin{enumerate}
        \item $[a, b] = \{ x \mid a \leq x \leq b \}$;
        \item $[a, b) = \{ x \mid a \leq x < b \}$;
        \item $(a, b) = \{ x \mid a < x < b \}$;
        \item $(a, b] = \{ x \mid a < x \leq b \}$;
        \item $(-\infty, b] = \{ x \mid x \leq b \}$;
        \item $(-\infty, b) = \{ x \mid x < b \}$;
        \item $(-\infty, +\infty) = \mathbb{R}$;
        \item $(a, +\infty) = \{ x \mid a < x \}$;
        \item $[a, +\infty) = \{ x \mid a \leq x \}$.
    \end{enumerate}
    统称这九类子集为\emph{区间}\index{qu1jian1@区间}.
    $a$ 是区间 $[a, b]$,
    $[a, b)$, $(a, b)$, $(a, b]$,
    $(a, +\infty)$, $[a, +\infty)$ 的%
                    \emph{左端点}\index{zuo3duan1dian3@左端点};
                $b$ 是区间 $[a, b]$,
                $[a, b)$, $(a, b)$, $(a, b]$,
                $(-\infty, b]$, $(-\infty, b)$ 的%
    \emph{右端点}\index{you4duan1dian3@右端点};
    左端点与右端点都是\emph{端点}\index{duan1dian3@端点}.

    有时, 我们认为 $\{ a \}$ 是\emph{退化为一点的区间}%
    \index{tui4hua4wei2yi1dian3de5qu1jian1@退化为一点的区间}
    $[a, a]$;
    我们认为空集是\emph{空区间}%
    \index{kong1qu1jian1@空区间}
    $[a, a)$, $(a, a)$, $[a, a)$,
    $[b, a)$, $(b, a)$, $(b, a]$
    或 $[b, a]$.
    退化为一点的区间与空区间都是\emph{退化区间}%
    \index{tui4hua4qu1jian1@退化区间}.
\end{definition}

\begin{remark}
    设 $a$, $b$, $c$ 是实数.
    说 $b$ 介于 $a$ 跟 $c$ 之间,
    就是说 $a \leq b \leq c$ 或 $c \leq b \leq a$
    (简单地, 就是 $(b - a)(b - c) \leq 0$).
    这里, 我们临时地模糊区间与退化区间的差异,
    统称其为 ``区间''.
    那么, 显而易见地,
    任给一个区间 $I$,
    任取 $I$ 的二个相异实数 $a$, $b$,
    则每个介于 $a$ 跟 $b$ 之间的实数必为 $I$ 的元.
    反过来, 若 $\mathbb{R}$ 的子集 $I$ 适合
    ``任取 $I$ 的二个相异实数,
    每个介于 $a$ 跟 $b$ 之间的实数必为 $I$ 的元'',
    则 $I$ 是区间.
    此事的论证依赖实数的完备性,
    故我就不继续展开它了.
    若您对此事感兴趣,
    可参考\gls{mathematician}张筑生的《数学分析新讲》.
\end{remark}

\section{关系与函数}

\begin{definition}
    设 $A$, $B$ 是集.
    $A \times B$ 的子集称为 $A$ 到 $B$ 的\emph{关系}%
    \index{guan1xi5@关系}.
\end{definition}

\begin{definition}
    设 $A$, $B$ 是集.
    若 $A$ 到 $B$ 的关系 $f$ 适合下述性质,
    则说 $f$ 是 $A$ 到 $B$ 的\emph{函数}\index{han1shu4@函数}
    (或\emph{映射}\index{ying4she4@映射}):
    \begin{itemize}
        \item 任取 $a \in A$, 必有 $b \in B$ 使 $(a,b) \in f$;
        \item 若 $(a,b)$ 与 $(a,c)$ 均为 $f$ 的元, 则 $b = c$.
    \end{itemize}
    设 $(a,b) \in f$.
    我们记此事为 $b = f[a]$,
    并说 $b$ 是 $a$ 在函数 $f$ 下的\emph{像}\index{xiang4@像},
    $a$ 是 $b$ 在函数 $f$ 下的一个\emph{逆像}%
    \index{ni4xiang4@逆像}.

    我们通常也可如此表示函数 $f$:
    \begin{align*}
        \text{$f$:} \quad
        A & \to B,            \\
        a & \mapsto b = f[a].
    \end{align*}

    ``$f$: $A \to B$'' 是
    ``$f$ 是 $A$ 到 $B$ 的函数'' 的简写.
\end{definition}

\begin{remark}
    一般地, 我们写 $a$ 在函数 $f$ 下的像为 $f(a)$, 而不是 $f[a]$.
    不过, 出于某些原因 (之后就会看到), 此处用方括号.
\end{remark}

\begin{example}
    设 $A = \{ 0,1,2 \}$, $B = \{ 0,1 \}$.
    显然, $A \times B$ 有 $6$~个元.
    不难看出, $A \times B$ 有 $64$~个子集,
    故 $A$ 到 $B$ 的关系共有 $64$~个.
    不过, $A$ 到 $B$ 的函数只有 $8$~个.
\end{example}

\begin{definition}
    在本书, 我们为 ``什么也不干'' 的函数起一个名字.
    具体地, 设 $A \subset B$.
    我们定义
    \begin{align*}
        \text{$\iota_{A,B}$:} \quad
        A & \to B,                       \\
        a & \mapsto a = \iota_{A,B} [a],
    \end{align*}
    其中 $\iota$ 是希腊字母 iota.

    我们简单地写 $\iota_{A,A}$ 为 $\iota_{A}$.
    有时, 若既不必指出 $A$, 也不必指出 $B$,
    我们直接写 $\iota$.
    换句话说:
    $\iota$
    (或者带下标的 $\iota_{A}$, $\iota_{A,B}$) 啥也不干,
    即 $\iota[x] = x$,
    其中 $x$ 可以是任意文字.

    一般也称 $\iota$ 为\emph{恒等函数}%
    \index{heng2deng3han2shu4@恒等函数}.
\end{definition}

\begin{definition}
    设 $f$ 是 $A$ 到 $B$ 的函数.
    称 $A$ 为 $f$ 的\emph{定义域}\index{ding4yi1yu4@定义域};
    称 $B$ 为 $f$ 的\emph{陪域}\index{pei2yu4@陪域}.
\end{definition}

\begin{definition}
    设 $C \subset A$.
    设 $f$: $A \to B$.
    我们记
    \begin{align*}
        f[C] = \{ f[c] \mid \text{$c \in C$} \}.
    \end{align*}
    特别地, 称 $f[A]$ 为 $f$ 的\emph{值域}\index{zhi2yu4@值域}.
    显然 $f$ 的值域是 $f$ 的陪域的子集.
\end{definition}

\begin{remark}
    设 $f$: $A \to B$.
    若 $D \subset C \subset A$, 则 $f[D] \subset f[C]$.
\end{remark}

\begin{definition}
    设 $f$, $g$ 都是 $A$ 到 $B$ 的函数.
    若任取 $a \in A$, 都有 $f[a] = g[a]$, 则说 $f = g$.

    可写 $f = g$ 的否定为 $f \neq g$.
    具体地, 若存在 $a \in A$ 使 $f[a] \neq g[a]$,
    则说 $f \neq g$.
\end{definition}

\begin{definition}
    设 $R$ 是 $A$ 到 $B$ 的关系.
    $B$ 到 $A$ 的关系
    \begin{align*}
        S = \{ (b, a) \mid (a, b) \in R \}
    \end{align*}
    称为 $R$ 的\emph{反关系}\index{fan3guan1xi5@反关系}.
\end{definition}

\begin{definition}
    设 $f$ 是 $A$ 到 $B$ 的函数.
    若 $f$ 的反关系 $g$ 是 $B$ 到 $A$ 的函数,
    则称 $g$ 是 $f$ 的\emph{反函数}\index{fan3han2shu4@反函数}.
    我们写 $f$ 的反函数为 $f^{[-1]}$.
\end{definition}

\begin{remark}
    不难验证, 若 $g$ 是 $f$ 的反函数,
    则 $f$ 也一定是 $g$ 的反函数.
    这是因为 $R$ 的反关系的反关系是 $R$.
\end{remark}

\begin{definition}
    设 $f$ 是 $A$ 到 $B$ 的函数,
    $g$ 是 $C$ 到 $D$ 的函数,
    且 $f[A] \subset C$.
    任取 $A$ 的元 $a$.
    按照函数的定义,
    存在唯一的 $b \in f[A]$ 使 $(a, b) \in f$.
    既然 $b \in f[A] \subset C$,
    再根据函数的定义,
    存在唯一的 $d \in g[C] \subset D$ 使 $(b, d) \in g$.
    这样的 $d$ 可用 $g[f[a]]$ 表示.
    作 $A$ 到 $D$ 的关系
    \begin{align*}
        g \circ f = \{ (a, g[f[a]]) \mid a \in A \}.
    \end{align*}
    不难验证, 这是 $A$ 到 $D$ 的函数.
    我们称函数 $g \circ f$ 为 $f$ 与 $g$ 的\emph{复合}%
    \index{fu4he2@复合}.
\end{definition}

\begin{remark}
    设 $f$: $A \to B$, $g$: $C \to D$,
    且 $f[A] \subset C$.
    设 $E \subset A$.
    那么 $f[E] \subset f[A] \subset C$,
    故 $g[f[E]]$ 是有意义的.
    我们说, $g[f[E]] = (g \circ f)[E]$.

    取 $d \in g[f[E]]$.
    按定义, 存在 $t \in f[E]$ 使 $g[t] = d$.
    对这个 $t$ 而言, 又存在 $e \in E$ 使 $f[e] = t$.
    $(g \circ f)[e]$, 按定义,
    等于 $g[f[e]]$, 也就是 $g[t]$, 也就是 $d$.
    所以 $d \in (g \circ f)[E]$.
    这说明 $g[f[E]] \subset (g \circ f)[E]$.

    取 $d^{\prime} \in (g \circ f)[E]$.
    按定义, 存在 $e^{\prime} \in E$ 使
    $(g \circ f)[e^{\prime}] = d^{\prime}$.
    所以 $t^{\prime} = f[e^{\prime}] \in f[E]$.
    那么 $g[t^{\prime}] = d^{\prime}$.
    所以 $d^{\prime} \in g[f[E]]$.
    这说明 $g[f[E]] \supset (g \circ f)[E]$.

    既然 $g[f[E]]$ 跟 $(g \circ f)[E]$ 相互包含,
    二者必相等.

    或许上面的论证比较枯燥;
    或许此事比较显然.
    不过, 严谨的\gls{math}就是像上面这样,
    用定义说话, 而不是想当然.
    毕竟, 尽管我们定义了
    $a \in A$ 时 $(g \circ f)[a]$ 就是 $g[f[a]]$,
    可我们并没有\emph{定义} $(g \circ f)[E]$ 是 $g[f[E]]$.
    大\gls{mathematician} John von Neumann 说过:
    ``Young man, in mathematics
    you don\textquotesingle{}t understand things.
    You just get used to them.''
    所以, 习惯就好了.
\end{remark}

\begin{remark}
    设 $f$: $A \to B$.
    那么 $f \circ \iota_A = f$,
    且 $\iota_B \circ f = f$.
\end{remark}

\begin{remark}
    一般地, $g \circ f \neq f \circ g$.
    一方面, $g \circ f$ 有定义时, $f \circ g$ 可能无定义;
    另一方面, 即使 $g \circ f$ 与 $f \circ g$ 都有定义,
    二者也不一定相等.
\end{remark}

\begin{theorem}
    函数的复合是\emph{结合的}.
    具体地, 设
    $f$: $A \to B$, $g$: $C \to D$, $h$: $E \to F$,
    且 $f[A] \subset C$, $g[C] \subset E$.
    那么
    \begin{align*}
        h \circ (g \circ f) = (h \circ g) \circ f.
    \end{align*}
    所以, 我们可简单地记上式的任意一侧为
    $h \circ g \circ f$.
\end{theorem}

\begin{proof}
    $q = g \circ f$ 是 $A$ 到 $D$ 的函数,
    且 $p = h \circ g$ 是 $C$ 到 $E$ 的函数.
    因 $q[A] = g[f[A]] \subset g[C] \subset E$,
    故 $h \circ q = h \circ (g \circ f)$
    是 $A$ 到 $F$ 的函数;
    因 $f[A] \subset C$,
    故 $p \circ f = (h \circ g) \circ f$
    也是 $A$ 到 $F$ 的函数.
    任取 $a \in A$. 则
    \begin{align*}
         & (h \circ (g \circ f))[a]
        = h[(g \circ f)[a]]
        = h[g[f[a]]],               \\
         & ((h \circ g) \circ f)[a]
        = (h \circ g)[f[a]]
        = h[g[f[a]]]. \qedhere
    \end{align*}
\end{proof}

\begin{definition}
    设 $f$ 是 $A$ 到 $B$ 的函数.
    \begin{itemize}
        \item 若任取 $A$ 的相异二元 $a$ 与 $a^{\prime}$,
              都有 $f[a] \neq f[a^{\prime}]$,
              则称 $f$ 是\emph{单函数}%
              \index{dan1han2shu4@单函数}.
        \item 若对任意 $b \in B$,
              都存在 $a \in A$ 使 $f[a] = b$,
              则称 $f$ 是\emph{满函数}%
              \index{man3han2shu4@满函数}.
    \end{itemize}
\end{definition}

\begin{example}
    设 $A \subset B$.
    $A$ 到 $B$ 的函数 $\iota_{A,B}$ 总是单函数.
    不过, 若 $A \neq B$, 则 $\iota_{A,B}$ 不是满函数.
\end{example}

\begin{remark}
    设 $B \subset C$.
    设 $f$ 是 $A$ 到 $B$ 的函数,
    $g$ 是 $A$ 到 $C$ 的函数,
    且对任意 $a \in A$, $f[a] = g[a]$.
    那么, $f$ 是单函数的一个必要与充分条件是:
    $g$ 是单函数.
    若 $f$ 不是满函数, 则 $g$ 也不是.

    若 $f$ 是满函数,
    则 $g$ 也是满函数的一个必要与充分条件是:
    $B = C$.
\end{remark}

\begin{theorem}
    设 $f$ 是 $A$ 到 $B$ 的函数.
    设 $B$ 到 $A$ 的函数 $g$ 适合如下性质:
    \begin{itemize}
        \item 对任意 $a \in A$, $g[f[a]] = a$;
              也就是说, $g \circ f = \iota_A$.
        \item 对任意 $b \in B$, $f[g[b]] = b$;
              也就是说, $f \circ g = \iota_B$.
    \end{itemize}
    则:
    \begin{itemize}
        \item 至多有一个这样的 $g$;
        \item $g$ 是 $f$ 的反函数.
    \end{itemize}
\end{theorem}

\begin{proof}
    至多只有一个这样的 $g$ 是显然的.
    具体地, 若
    $g^{\prime}$: $B \to A$
    适合
    $g^{\prime} \circ f = \iota_A$,
    且 $f \circ g^{\prime} = \iota_B$, 则
    \begin{align*}
        g
        = g \circ \iota_B
        = g \circ (f \circ g^{\prime})
        = (g \circ f) \circ g^{\prime}
        = \iota_A \circ g^{\prime}
        = g^{\prime}.
    \end{align*}

    下证 $g$ 是 $f$ 的反函数.
    事实上, 若 $h$ 是 $f$ 的反函数,
    则不难验证 $h$ 适合上述二条性质.
    所以 $g = h$.
\end{proof}

\begin{theorem}
    设 $f$: $A \to B$ 与 $g$: $B \to C$ 的反函数%
    分别是 $f^{[-1]}$: $B \to A$ 与 $g^{[-1]}$: $C \to B$.
    则 $g \circ f$: $A \to C$ 有反函数, 且
    \begin{align*}
        {(g \circ f)}^{[-1]} = f^{[-1]} \circ g^{[-1]}.
    \end{align*}
\end{theorem}

\begin{proof}
    记 $q = f^{[-1]} \circ g^{[-1]}$: $C \to A$;
    记 $p = g \circ f$.
    不难用结合律验证 $q \circ p = \iota_A$,
    且 $p \circ q = \iota_B$.
    这里以 $q \circ p$ 为例:
    \begin{align*}
        q \circ p
        = {} & q \circ (g \circ f)                         \\
        = {} & (q \circ g) \circ f                         \\
        = {} & ((f^{[-1]} \circ g^{[-1]}) \circ g) \circ f \\
        = {} & (f^{[-1]} \circ (g^{[-1]} \circ g)) \circ f \\
        = {} & (f^{[-1]} \circ \iota_B) \circ f            \\
        = {} & f^{[-1]} \circ f                            \\
        = {} & \iota_A. \qedhere
    \end{align*}
\end{proof}

\begin{remark}
    不难看出, 函数 $f$ 有反函数的一个必要与充分条件是:
    $f$ 是单函数, 且 $f$ 是满函数.

    我们称既是单函数, 也是满函数的函数为\emph{双函数}%
    \index{shuang1han2shu4@双函数}.
\end{remark}

\begin{definition}
    设 $f$ 是 $A$ 到 $B$ 的函数.
    设 $C \subset A$.
    作 $C$ 到 $B$ 的关系
    \begin{align*}
        f_C = \{ (c, f[c]) \mid c \in C \}.
    \end{align*}
    易知, $f_C$ 是 $C$ 到 $B$ 的函数.
    我们说, $f_C$ 是 $f$ 在 $C$ 上的\emph{限制}%
    \index{xian4zhi4@限制}.
\end{definition}

\section{函数的演算}

\begin{remark*}
    本节的话或许比较混乱.
\end{remark*}

本节讨论
$\mathbb{R}$ 的子集到 $\mathbb{R}$ 的子集%
的函数及其演算.

您应该还能想起, 本书的标题是 ``\thetitle{}''.
所以, 为了实现此目标,
我们首先得无变量地表达常见的函数 (初等函数).

在此之前, 我们引入一个简单的术语.

\begin{definition}
    设 $f$: $A \to B$, $B \subset \mathbb{R}$ 且 $0 \in B$.
    若存在 $a \in A$ 使 $f[a] = 0$,
    就说 $a$ 是 $f$ 的一个\emph{根}\index{gen1@根}.
\end{definition}

现在我们介绍一些 ``基本初等函数''.

\begin{definition}
    本书经常使用如下函数.
    \begin{enumerate}
        \item 恒等函数:
              \begin{align*}
                  \text{$\iota$:} \quad
                  \mathbb{R} & \to \mathbb{R}, \\
                  x          & \mapsto x;
              \end{align*}
        \item 常函数:
              \begin{align*}
                  \text{$c$:} \quad
                  \mathbb{R} & \to \{ c \}, \\
                  x          & \mapsto c,
              \end{align*}
              其中 $c$ 是某个事先指定的实数;
        \item 指数函数:
              \begin{align*}
                  \text{$\mathrm{exp}$:} \quad
                  \mathbb{R} & \to (0, +\infty),                               \\
                  x          & \mapsto \sum_{k = 0}^{\infty} {\frac{x^k}{k!}};
              \end{align*}
        \item 正弦函数:
              \begin{align*}
                  \text{$\mathrm{sin}$:} \quad
                  \mathbb{R} & \to [-1, 1],                                                     \\
                  x          & \mapsto \sum_{k = 0}^{\infty} {\frac{(-1)^k x^{2k+1}}{(2k+1)!}};
              \end{align*}
        \item 馀弦函数:
              \begin{align*}
                  \text{$\mathrm{cos}$:} \quad
                  \mathbb{R} & \to [-1, 1],                                                 \\
                  x          & \mapsto \sum_{k = 0}^{\infty} {\frac{(-1)^k x^{2k}}{(2k)!}};
              \end{align*}
        \item 正切函数:
              \begin{align*}
                  \text{$\mathrm{tan}$:} \quad
                  \{ x \mid \mathrm{cos} {[x]} \neq 0 \} & \to \mathbb{R},                                         \\
                  x                                      & \mapsto \frac{\mathrm{sin} {[x]}} {\mathrm{cos} {[x]}};
              \end{align*}
        \item 对数函数:
              \begin{align*}
                  \text{$\mathrm{ln}$:} \quad
                  (0, +\infty) & \to \mathbb{R},                    \\
                  x            & \mapsto \mathrm{exp}^{[-1]} {[x]};
              \end{align*}
        \item 反正弦函数:
              \begin{align*}
                  \text{$\mathrm{arcsin}$:} \quad
                  [-1, 1] & \to \bigg[ {-\frac{2\pi}{4}}, \frac{2\pi}{4} \bigg], \\
                  x       & \mapsto s^{[-1]} {[x]},
              \end{align*}
              其中 $s$ 指 $\mathrm{sin}$ 在
              $I = [-2\pi/4, 2\pi/4]$ 上的限制
              $\mathrm{sin}_I$: $I \to [-1, 1]$,
              $2\pi$ 是 $\mathrm{cos}$ 的最小正根的四倍;
        \item 反正切函数:
              \begin{align*}
                  \text{$\mathrm{arctan}$:} \quad
                  \mathbb{R} & \to \bigg( {-\frac{2\pi}{4}}, \frac{2\pi}{4} \bigg), \\
                  x          & \mapsto t^{[-1]} {[x]},
              \end{align*}
              其中 $t$ 指 $\mathrm{tan}$ 在
              $J = (-2\pi/4, 2\pi/4)$ 上的限制
              $\mathrm{tan}_J$: $J \to \mathbb{R}$;
        \item 绝对值函数:
              \begin{align*}
                  \text{$\mathrm{abs}$:} \quad
                  \mathbb{R} & \to [0, +\infty),             \\
                  x          & \mapsto \begin{cases}
                                           x,  & \quad x \geq 0; \\
                                           -x, & \quad x < 0.
                                       \end{cases}
              \end{align*}
        \item 根号函数:
              \begin{align*}
                  \text{$\mathrm{sqrt}$:} \quad
                  [0, +\infty) & \to [0, +\infty), \\
                  x            & \mapsto \sqrt{x}.
              \end{align*}
    \end{enumerate}
\end{definition}

\begin{remark}
    在本书, $2\pi$ 是一个整体记号.
\end{remark}

利用这些函数与复合, 我们可以作出一些稍复杂的函数.

\begin{example}
    设 $A = [1, +\infty)$. 设
    \begin{align*}
        \text{$f$:} \quad
        A & \to \mathbb{R},                                                \\
        x & \mapsto \mathrm{exp} {\bigg[ \sqrt{\mathrm{ln} {[x]}} \bigg]}.
    \end{align*}
    我们可以用无变量的记号表达 $f$ 的定义.
    具体地,
    \begin{align*}
        f = \mathrm{exp} \circ \mathrm{sqrt} \circ \mathrm{ln}_{A}.
    \end{align*}
    这里, $\mathrm{ln}_{A}$ 自然是
    $\mathrm{ln}$ 在 $A$ 上的限制.
\end{example}

不过, 复合并不够用.

\begin{example}
    设 $A = [1, +\infty)$. 设
    \begin{align*}
        \text{$g$:} \quad
        A & \to \mathbb{R},                                                                           \\
        x & \mapsto \mathrm{exp} {\bigg[ \sqrt{\mathrm{ln} {[x]}} \bigg]} + \mathrm{sin} {[x]} + x^3.
    \end{align*}
    怎么用无变量的记号表达 $g$ 的定义呢?
    似乎并不太好办.
    我们可分别写
    $\mathrm{exp} {\bigg[ \sqrt{\mathrm{ln} {[x]}} \bigg]}$
    跟
    $\mathrm{sin} {[x]}$
    为
    $\mathrm{exp} \circ \mathrm{sqrt} \circ \mathrm{ln}_{A}$
    与
    $\mathrm{sin}_A$;
    可是, 我们要怎么写 $x^3$?
    就算写出来, 又该如何拼接这三项呢?
\end{example}

\begin{definition}
    设 $A$, $B$, $C$ 是 $\mathbb{R}$ 的子集.
    设 $f$: $A \to B$, $g$: $A \to C$.
    设 $\ast$ 是文字 $+$, $-$, $\cdot$ 的任意一个.
    定义
    \begin{align*}
        \text{$f \ast g$:} \quad
        A & \to D,                  \\
        x & \mapsto f[x] \ast g[x],
    \end{align*}
    其中陪域 $D \subset \mathbb{R}$ 可视具体情况待定.
    一般地, 若 $\ast$ 是乘号 $\cdot$, 则可被省略.
    可写 $0_A - f$ 为 $-f$;
    这里 $0_A$ 当然是常函数 $0$ 在 $A$ 上的限制.

    若对任意 $x \in A$, 都有 $f[x] \neq 0$, 则还可定义
    \begin{align*}
        \text{$\frac{g}{f}$:} \quad
        A & \to E,                     \\
        x & \mapsto \frac{g[x]}{f[x]},
    \end{align*}
    其中陪域 $E \subset \mathbb{R}$ 可视具体情况待定.

    若对任意 $x \in A$, ${f[x]}^{g[x]}$ 有意义, 则还可定义
    \begin{align*}
        \text{${f}^{g}$:} \quad
        A & \to F,                 \\
        x & \mapsto {f[x]}^{g[x]},
    \end{align*}
    其中陪域 $F \subset \mathbb{R}$ 可视具体情况待定.
\end{definition}

\begin{example}
    设 $A = [1, +\infty)$. 设
    \begin{align*}
        \text{$g$:} \quad
        A & \to \mathbb{R},                                                                           \\
        x & \mapsto \mathrm{exp} {\bigg[ \sqrt{\mathrm{ln} {[x]}} \bigg]} + \mathrm{sin} {[x]} + x^3.
    \end{align*}
    现在我们可以写 $x^3$ 为 ${(\iota_A)}^{3_A}$.
    所以
    \begin{align*}
        g = (\mathrm{exp} \circ \mathrm{sqrt} \circ \mathrm{ln}_{A} + \mathrm{sin}_{A}) + {(\iota_A)}^{3_A};
    \end{align*}
    这里, 我们取陪域为 $\mathbb{R}$.
\end{example}

现在, 我们可以无变量地表达很多函数了.
可您应该也注意到了一个问题:
无变量地表达函数并不是很方便.
为了体现定义域, 我们动用了限制.
上例的 $g$ 还不是很复杂, 但我们还是用了 $4$ 次限制.
取 $B = (0, 1)$.
令
\begin{align*}
    \text{$h$:} \quad
    B & \to \mathbb{R},                                                                                              \\
    x & \mapsto \mathrm{ln} {\bigg[ \frac{x - \mathrm{sin} {[x]}}{1 - x} \bigg]} + \sqrt{2\pi - \mathrm{exp} {[x]}},
\end{align*}
那我们就要写
\begin{align*}
    h
    = \mathrm{ln} \circ \frac{\iota_B - \mathrm{sin}_B}{1_B - \iota_B}
    + \mathrm{sqrt} \circ ((2\pi)_B - \mathrm{exp}_B).
\end{align*}

不过, 幸运地, 这个问题并不是什么大问题.

原则上, 一个函数的三要素是定义域、陪域与 ``对应法则''.
不过, 您无妨回想一下您学过的\gls{math}.
当我们看到形如
``函数 $f(x) = \sqrt{1 + x} + \operatorname{ln} {(1 - x)}$''
这样的文字时,
我们其实视这个 $f$ 的定义域为%
全体使 $f(x)$ 有意义的一切实数作成的集
(也就是 $[-1, 1)$);
当我们看到形如
``函数 $g(x) = 1 - x$ ($x \in [-1, 0]$)'' 的文字时,
我们认为 $g$ 的定义域为已经提到的集 $[-1, 0]$.
$f$ 跟 $g$ 的陪域呢?
没说, 就选一个包含值域的集即可
(比如说, ``万能的'' $\mathbb{R}$).

这种写法虽失去一些严谨, 但并不特别影响使用
(当然, 讨论满函数与反函数时, 就要谨慎了).
所以, 我们作出如下的约定:
\begin{itemize}
    \item 除非特别声明, 我们不严格区分函数及其限制.
    \item 除非特别声明, 我们认为函数的陪域可以按实际需要而确定.
          一般地, 我们取 $\mathbb{R}$.
\end{itemize}
这样, 我们可以简单地且无变量地表达函数.
比如说, 我们可直接写上面的 $h$ 为
\begin{align*}
    h = {\mathrm{ln}} \circ \frac{\iota - \mathrm{sin}}{1 - \iota}
    + \mathrm{sqrt} \circ (2\pi - \mathrm{exp}).
\end{align*}

\begin{definition}
    我们称定义域为 $A$ 的函数为 (定义在) $A$ 上的函数.
\end{definition}

借此机会, 我们再定义一个常用的说法.

\begin{definition}
    若 $B \subset A$, $f$ 是 $A$ 上的函数,
    我们说 $f$ 在 $B$ 上有定义.
\end{definition}

采取上述约定后, 我们有下面的等式:
\begin{align*}
    \begin{array}{ll}
        f + g = g + f,             & fg = gf,            \\
        (f + g) + h = f + (g + h), & (fg)h = f(gh),      \\
        f(g + h) = fg + fh,        & (f + g)h = fh + gh.
    \end{array}
\end{align*}
这里 $f$, $g$, $h$ 都是 $A$ 上的函数.

设函数 $\ell$ 的值域是 $A$ 的子集.
记 $f \, / \, g = \frac{f}{g}$,
$f \, \text{\textasciicircum} \, g = f^g$.
设 $\ast$ 是五文字
$+$, $-$, $\cdot$, $/$, $\text{\textasciicircum}$
的任意一个.
则
\begin{align*}
    (f \ast g) \circ \ell = (f \circ \ell) \ast (g \circ \ell).
\end{align*}

上面的等式的验证并不难;
用函数的相等的定义验证即可.
比方说,
\begin{align*}
    ((f \ast g) \circ \ell)[x]
    = {} & (f \ast g)[\ell[x]] = f[\ell[x]] \ast g[\ell[x]] \\
    = {} & (f \circ \ell)[x] \ast (g \circ \ell)[x]
    = ((f \circ \ell) \ast (g \circ \ell))[x].
\end{align*}
您可以按完全类似的套路论证关于 $+$ 与 $\cdot$ 的等式.

我们用一些简单的例结束本节;
顺便, 这些例也结束本章.
最后一个例在之后的微积分演算中有用,
故我建议您好好看看它.

\begin{example}
    我们知道, 对任意实数 $x$, 都有
    $(\mathrm{cos} {[x]})^2 + (\mathrm{sin} {[x]})^2 = 1$.
    那么, 无变量地, 我们可写此式为
    \begin{align*}
        \mathrm{cos}^2 + \mathrm{sin}^2 = 1.
    \end{align*}
\end{example}

\begin{example}
    我们可写 ``二倍角公式'' 为
    \begin{align*}
        \mathrm{sin} \circ {2\iota}
         & = 2 \,\mathrm{cos} \,\mathrm{sin},                                         \\
        \mathrm{cos} \circ {2\iota}
         & = \mathrm{cos}^2 - \mathrm{sin}^2                                          \\
         & = 2\,\mathrm{cos}^2 - 1 = 1 - 2\,\mathrm{sin}^2                            \\
         & = (\mathrm{cos} + \mathrm{sin}) (\mathrm{cos} - \mathrm{sin}),             \\
        \mathrm{tan} \circ {2\iota}
         & = \frac{\mathrm{sin}}{\mathrm{cos}} \circ {2\iota}                         \\
         & = \frac{2 \,\mathrm{cos} \,\mathrm{sin}} {\mathrm{cos}^2 - \mathrm{sin}^2} \\
         & = \frac{2\,\mathrm{tan}}{1 - \mathrm{tan}^2}                               \\
         & = \frac{2\iota}{1 - \iota^2} \circ {\mathrm{tan}}.
    \end{align*}
\end{example}

\begin{example}
    值得注意的是, $f(g + h)$ 并不是 $f \circ (g + h)$:
    \begin{align*}
        2\,\mathrm{cos} \,(\mathrm{cos} + \mathrm{sin})
        = {} & 2\,\mathrm{cos}^2 + 2 \,\mathrm{cos} \,\mathrm{sin}                                \\
        = {} & (\mathrm{cos} + \mathrm{sin} + 1) \circ {2\iota}                                   \\
        = {} & (\mathrm{cos} + \mathrm{sin}) \circ {2\iota} + 1                                   \\
        = {} & \sqrt{2}\,\mathrm{cos} \circ \bigg( \iota - \frac{2\pi}{8} \bigg) \circ 2\iota + 1 \\
        = {} & \sqrt{2}\,\mathrm{cos} \circ \bigg( 2\iota - \frac{2\pi}{8} \bigg) + 1.
    \end{align*}
\end{example}

\begin{example}
    值得注意的是,
    本书的 $\mathrm{sin}^{-1}$ 不是 $\arcsin$,
    $\mathrm{tan}^{-1}$ 也不是 $\arctan$.
    那它们是什么呢?
    请看:
    \begin{align*}
        \mathrm{sin}^{-1} - \mathrm{tan}^{-1}
        = {} & \frac{1}{\mathrm{sin}} - \frac{1}{\mathrm{tan}}                                   \\
        = {} & \frac{1}{\mathrm{sin}} - \frac{\mathrm{cos}}{\mathrm{sin}}                        \\
        = {} & \frac{1 - \mathrm{cos}} {\mathrm{sin}}                                            \\
        = {} & \frac{2\, \mathrm{sin}^2} {2\, \mathrm{cos}\, \mathrm{sin}} \circ \frac{\iota}{2} \\
        = {} & \mathrm{tan} \circ \frac{\iota}{2}.
    \end{align*}
\end{example}

\begin{example}
    我们看一些%
    关于 $\mathrm{arcsin}$ 跟 $\mathrm{arctan}$ 的等式.
    在本例, 我们约定,
    $\mathrm{sin}$, $\mathrm{tan}$ 分别表示
    $\mathrm{sin}_{[-2\pi/4, 2\pi/4]}$
    与
    $\mathrm{tan}_{(-2\pi/4, 2\pi/4)}$.
    这样,
    \begin{align*}
        \mathrm{sin} \circ \mathrm{arcsin}
         & = \iota_{[-1, 1]},    \\
        \mathrm{tan} \circ \mathrm{arctan}
         & = \iota_{\mathbb{R}}.
    \end{align*}
    由此, 我们可以作出如下的计算:
    \begin{align*}
        \mathrm{cos} \circ \mathrm{arcsin}
        = {} & \mathrm{cos} \circ (\iota_{[-2\pi/4, 2\pi/4]} \circ \mathrm{arcsin})           \\
        = {} & (\mathrm{cos} \circ \iota_{[-2\pi/4, 2\pi/4]}) \circ \mathrm{arcsin}           \\
        = {} & (\mathrm{sqrt} \circ (1 - \iota^2) \circ \mathrm{sin}) \circ \mathrm{arcsin}   \\
        = {} & (\mathrm{sqrt} \circ (1 - \iota^2)) \circ (\mathrm{sin} \circ \mathrm{arcsin}) \\
        = {} & \mathrm{sqrt} \circ (1 - \iota^2).
    \end{align*}
    这里的 $\iota$ 自然是 $\iota_{[-1, 1]}$.

    类似地,
    \begin{align*}
        \mathrm{cos} \circ \mathrm{arctan}
        = {} & \mathrm{cos} \circ (\iota_{(-2\pi/4, 2\pi/4)} \circ \mathrm{arctan})                                           \\
        = {} & (\mathrm{cos} \circ \iota_{(-2\pi/4, 2\pi/4)}) \circ \mathrm{arctan}                                           \\
        = {} & \bigg( \mathrm{sqrt} \circ \frac{\mathrm{cos}^2} {\mathrm{cos}^2 + \mathrm{sin}^2}\bigg) \circ \mathrm{arctan} \\
        = {} & \bigg( \mathrm{sqrt} \circ \frac{1}{1 + \iota^2} \circ \mathrm{tan} \bigg) \circ \mathrm{arctan}               \\
        = {} & \bigg( \mathrm{sqrt} \circ \frac{1}{1 + \iota^2} \bigg) \circ (\mathrm{tan} \circ \mathrm{arctan})             \\
        = {} & \frac{1}{\mathrm{sqrt} \circ (1 + \iota^2)}.
    \end{align*}

    有了上面的公式, 我们可轻松地写出
    \begin{align*}
         & \mathrm{sin} \circ \mathrm{arctan}
        = (\mathrm{cos} \, \mathrm{tan}) \circ \mathrm{arctan}
        = \frac{\iota}{\mathrm{sqrt} \circ (1 + \iota^2)}, \\
         & \mathrm{tan} \circ \mathrm{arcsin}
        = \frac{\mathrm{sin}}{\mathrm{cos}} \circ \mathrm{arcsin}
        = \frac{\iota}{\mathrm{sqrt} \circ (1 - \iota^2)}.
    \end{align*}
\end{example}

\begin{remark}
    或许, 您现在对无变量的函数演算不感到陌生.
    不过, 就算我们模糊了函数及其限制的区别,
    有些东西写起来还是稍繁的.
    所以, 我们再引入一个记号:
    $g[f]$ 表示 $g \circ f$.
    比如说, 我们可紧凑地写上例的结果为
    \begin{align*}
        \mathrm{cos} [\mathrm{arcsin}]
         & = \mathrm{sqrt} [1 - \iota^2],               \\
        \mathrm{cos} [\mathrm{arctan}]
         & = \frac{1}{\mathrm{sqrt} [1 + \iota^2]},     \\
        \mathrm{sin} [\mathrm{arctan}]
         & = \frac{\iota}{\mathrm{sqrt} [1 + \iota^2]}, \\
        \mathrm{tan} [\mathrm{arcsin}]
         & = \frac{\iota}{\mathrm{sqrt} [1 - \iota^2]}.
    \end{align*}
    虽然我已经用 $f[a]$ 表示 $a$ 在 $f$ 下的像了,
    我自然地也用 $f[C]$ 表示 $C$ 的每个元%
    在 $f$ 下的像作成的集,
    但我的早期工作并没有用 $g[f]$ 表示 $g \circ f$.
    这是 Marian 提到的记号, 我觉得不错, 就拿来用了.
\end{remark}
